<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-block main-card-block">
        <div class="border-bt">
          <h2 class="main-title">Dividend Payment Details</h2>
          <app-breadcrumb [routeChange]="routeChange"></app-breadcrumb>
          <h3 class="back-button" (click)="goBack()">
            <i class="fa fa-chevron-left"></i> Back
          </h3>
        </div>
      </div>
      <div class="card-body">
        <div class="card-block ml-3 mr-3">
          <aw-wizard [navBarLayout]="'large-filled-symbols'">
            <aw-wizard-step stepTitle="Details" [navigationSymbol]="{ symbol: '1' }">
              <form class="form" #f="ngForm" novalidate>
                <div class="form-body">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group m-0">
                        <label>Asset Id
                          <i class="fa fa-question-circle-o"
                             aria-hidden="true"
                             triggers="mouseenter:mouseleave"
                             placement="right"
                             container="body"
                             ngbPopover="The unique asset id">
                          </i>
                        </label>
                        <div>
                          <h6> {{dividendPaymentForm.assetId}} </h6>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group m-0">
                        <label>Asset
                          <i class="fa fa-question-circle-o"
                             aria-hidden="true"
                             triggers="mouseenter:mouseleave"
                             placement="right"
                             container="body"
                             ngbPopover="The asset name/ticker">
                          </i>
                        </label>
                        <div>
                          <h6> {{dividendPaymentForm.name}} </h6>
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group m-0">
                        <label>Amount per Share
                          <i class="fa fa-question-circle-o"
                             aria-hidden="true"
                             triggers="mouseenter:mouseleave"
                             placement="right"
                             container="body"
                             ngbPopover="The dividend in XIN for EACH share. If you have a total to pay, divide it by the number of total shares.">
                          </i>
                        </label>
                        <div class="input-group m-0">
                          <input type="number" class="form-control" name="amountPerQuant"
                                 #amountPerQuant="ngModel"
                                 [(ngModel)]="dividendPaymentForm.amountPerQuant" required minValue="1">
                          <div class="input-group-append">
                            <span class="input-group-text">XIN</span>
                          </div>
                        </div>
                        <div *ngIf="amountPerQuant?.invalid && (amountPerQuant?.dirty || amountPerQuant?.touched)"
                             class="input-error">
                          <div *ngIf="amountPerQuant?.errors.required">
                            Amount is required
                          </div>
                          <div *ngIf="amountPerQuant?.errors.minValue && !amountPerQuant?.errors.required">
                            Amount must be greater than 0
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group m-0">
                        <label>Height
                          <i class="fa fa-question-circle-o"
                             aria-hidden="true"
                             triggers="mouseenter:mouseleave"
                             placement="right"
                             container="body"
                             ngbPopover="The blockchain height at which asset holders shares will be counted (must be less than 1440 blocks in the past).">
                          </i>
                        </label>
                        <div class="input-group m-0">
                          <input type="number" class="form-control" name="height"
                                 #height="ngModel"
                                 [(ngModel)]="dividendPaymentForm.height" required>
                          <div class="input-group-append">
                            <span class="input-group-text">@BLOCK</span>
                          </div>
                        </div>
                        <div *ngIf="height?.invalid && (height?.dirty || height?.touched)"
                             class="input-error">
                          <div *ngIf="height?.errors.required">
                            Height is required
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-actions left">
                  <button type="button" (click)="dividendPayment()"
                          [disabled]="f.invalid"
                          class="btn btn-primary mr-1 mb-0 float-right" awNextStep>
                    <i class="fa fa-chevron-right"></i> Next
                  </button>
                </div>
              </form>
            </aw-wizard-step>
            <aw-wizard-step stepTitle="Confirm" [navigationSymbol]="{ symbol: '2' }">
              <div class="row">
                <div class="col-md-6">
                  <div class="ucsb"> Asset Id
                  </div>
                  <h4>{{dividendPaymentForm.assetId}}</h4>
                </div>
                <div class="col-md-6">
                  <div class="ucsb">Asset
                  </div>
                  <h4>{{dividendPaymentForm.name}}</h4>
                </div>
              </div>
              <hr/>
              <div class="row">
                <div class="col-md-6">
                  <div class="ucsb"> Amount
                  </div>
                  <h4>{{dividendPaymentForm.amountPerQuant}}
                    <small>XIN</small></h4>
                </div>
                <div class="col-md-6">
                  <div class="ucsb">Height
                  </div>
                  <h4>{{dividendPaymentForm.height}}</h4>
                </div>
              </div>
              <hr/>
              <div class="row">
                <div class="col-md-6">
                  <div class="ucsb"> Valid
                  </div>
                  <h4>
                    <h4 [innerHTML]="validBytes | txIsValid"></h4>
                  </h4>
                </div>
                <div class="col-md-6">
                  <div class="ucsb"> Service Fee
                  </div>
                  <h4>{{tx_fee | amountTkn}}
                    <small>XIN</small>
                  </h4>
                </div>
              </div>
              <hr>
              <button type="button" [ngClass]="{'btn-success': !unsignedTx, 'btn-danger': unsignedTx}"
                      class="btn btn-raised mr-1 mb-0" (click)="unsignedTx = !unsignedTx">
                <i class="fa fa-key"></i> Signed Transaction
              </button>
              <hr *ngIf="unsignedTx">
              <div class="form-group" *ngIf="unsignedTx">
                <div class="position-relative">
                                    <textarea disabled="true" rows="3" type="text" [(ngModel)]="transactionBytes"
                                              class="form-control" name="key"></textarea>
                </div>
              </div>
              <div class="form-actions">
                <button type="button" [disabled]="!validBytes" class="btn btn-primary float-right"
                        (click)="broadcastTransaction(transactionBytes)">
                  <i class="fa fa-check"></i> Finish
                </button>
                <button type="button" class="btn btn-primary mr-1 float-right" awPreviousStep>
                  <i class="fa fa-chevron-left"></i> Previous
                </button>
              </div>
            </aw-wizard-step>
          </aw-wizard>
        </div>
      </div>
    </div>
  </div>
</div>