<section>
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                
                <div class="card-block main-card-block pb-0">
                    <div class="border-bt">
                        <h2 class="main-title">MY ESCROW</h2>
                        <app-breadcrumb></app-breadcrumb>
                        <div class="pull-right filter-group">
                        <div class="btn-group btn-group-justified btn-group-raised" (click)="reload()">
                            <a href="javascript:void(0)" class="btn btn-sm btn-grey"><i
                                    class="fa fa-refresh"></i></a>
                        </div>
                    </div>
                    </div>
                <div class="card-body mt-4">
                    <div class="card-block ml-1 mr-1 ml-md-3 mr-md-3">
                        <ngx-datatable
                                [rows]="rows"
                                [columnMode]="'standard'"
                                [scrollbarH]="true"
                                [footerHeight]="50"
                                [rowHeight]="'auto'"
                                [externalPaging]="true"
                                [count]="page.totalElements"
                                [offset]="page.pageNumber"
                                [limit]="page.size"
                                (page)='setPage($event)'
                                (autoRefresh)="reload()">
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Role">
                                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                    {{row | escrowRole: accountRs}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Expires"
                                                  prop="deadline">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    {{value | timestamp}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Deadline"
                                                  prop="deadlineAction">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    {{value.toString().toUpperCase()}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Sender"
                                                  prop="senderRS">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    <a style="color: #337ab7;" (click)="accountDetail(value)"><u> {{value}} </u></a>
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Amount"
                                                  prop="amountTQT">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    {{value | amountTqt}}
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-25-per" cellClass="width-25-per" name="Recipient"
                                                  prop="recipientRS">
                                <ng-template let-value="value" ngx-datatable-cell-template>
                                    <a style="color: #337ab7;" (click)="accountDetail(value)"><u> {{value}} </u></a>
                                </ng-template>
                            </ngx-datatable-column>
                            <ngx-datatable-column headerClass="width-15-per" cellClass="width-15-per" name="Actions"
                                                  prop="id">
                                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                                    <div class="btn-group-raised">
                                    <a class="btn btn-sm btn-grey btn-icon" (click)="goToDetails(value)"
                                       triggers="mouseenter:mouseleave" container="body" placement="top"
                                       ngbPopover="Details">
                                        <i class="fa fa-list-ul"></i>
                                    </a>
                                    <a class="btn btn-sm btn-grey btn-icon" [ngClass]="{'disabled':isEditEnabled(row)}"
                                       ngbPopover="Sign Escrow" (click)="goToSignEscrow(value)"
                                       triggers="mouseenter:mouseleave" container="body" placement="top">
                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                    </a>
                                    <a class="btn btn-sm btn-grey btn-icon" (click)="goToEscrowStatus(value)"
                                       triggers="mouseenter:mouseleave" container="body" placement="top"
                                       ngbPopover="Escrow Status">
                                        <i class="fa fa-question-circle-o" aria-hidden="true"></i>
                                    </a>
                                    </div>
                                </ng-template>
                            </ngx-datatable-column>
                        </ngx-datatable>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
</section>
